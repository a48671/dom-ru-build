(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(t,e,n){t.exports=n(36)},36:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(11),c=n(9),i=n(10),l=n(4),u=n(5),s=n(7),f=n(6),d=n(8),p=n(13),m=function(t){var e=new Date(t).getFullYear(),n=new Date(t),a=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,r=new Date(t).getDate();return"".concat(e,"-").concat(a,"-").concat(r)},h=n(20),g=n(1),v=n.n(g),O=function(t){return v()(t.start.toString()).valueOf()},b=function(t){return v()(t.start.toString()).valueOf()+1e3*t.duration},w=Object(h.a)(function(t){return t.data},function(t){return t.currentDate},function(t,e){return t.reduce(function(t,n,a,r){var o=n.start.split(" ")[1].split(":"),l="".concat(o[0],":").concat(o[1]);return O(n)>e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"inFuture",time:l,end:b(n)})]):O(n)<=e&&b(n)>=e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"isNow",time:l,end:b(n)})]):b(n)<e&&b(r[a+1])>=e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"isOver",time:l,end:b(n)})]):b(n)<e&&b(r[a+1])<e&&b(r[a+2])>=e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"isPast",time:l,end:b(n)})]):Object(c.a)(t)},[])}),j=n(2),x=n(3),y="#aeaeae",S="#fff",N="blue",E="#c7e6fd",I="pink",k="#333";function D(){var t=Object(j.a)(["\n\tdisplay: block;\n\twidth: 100%;\n\tmax-width: 500px;\n\tmax-height: 100vh;\n\tbackground-color:",";\n"]);return D=function(){return t},t}function T(){var t=Object(j.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 100%;\n\tmin-height: 100vh;\n\toverflow: hidden;\n\tbackground-color: ",";\n"]);return T=function(){return t},t}var _=x.a.div.attrs({className:"wrapper"})(T(),y),P=x.a.div.attrs({className:"container"})(D(),S);function J(){var t=Object(j.a)(["\n\twidth: calc(100% - 70px);\n\tfont-size: 24px;\n\tfont-weight: 600;\n\tpadding-left: 30px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\ta {\n\t\tcolor: ",";\n\t\ttext-decoration: underline;\n\t}\n\t@media (max-width: 430px) {\n         font-size: 22px;\n  \t}\n"]);return J=function(){return t},t}function z(){var t=Object(j.a)(["\n\twidth: 70px;\n\theight: 70px;\n\timg {\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t}\n"]);return z=function(){return t},t}function C(){var t=Object(j.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\twidth: 100%;\n\tpadding: 10px 20px;\n"]);return C=function(){return t},t}var F=x.a.div.attrs({className:"head"})(C()),M=x.a.div.attrs({className:"head__logo"})(z()),U=x.a.h1.attrs({className:"head__title"})(J(),N),A=function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.logo,a=t.url;return r.a.createElement(F,null,r.a.createElement(M,null,r.a.createElement("img",{src:n,alt:e})),r.a.createElement(U,null,r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},e)))}}]),e}(a.PureComponent);A.defaultProps={title:"",logo:"",url:""};var R=A;function B(){var t=Object(j.a)(["\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tmax-height: calc(100vh - 90px);\n"]);return B=function(){return t},t}var Y=x.a.div.attrs({className:"telecast-list"})(B());function q(){var t=Object(j.a)(["\n\twidth: calc(100% - 70px);\n\tfont-size: 20px;\n\tfont-weight: 600;\n\tcolor: ",";\n\tpadding-left: 15px;\n\toverflow: hidden;\n\t@media (max-width: 430px) {\n         font-size: 18px;\n  \t}\n"]);return q=function(){return t},t}function G(){var t=Object(j.a)(["\n\twidth: 55px;\n\tfont-size: 22px;\n\t@media (max-width: 430px) {\n         font-size: 20px;\n  \t}\n"]);return G=function(){return t},t}function H(){var t=Object(j.a)(["\n\tdisplay: flex;\n\tpadding: 10px 20px;\n\talign-items: flex-start;\n\tborder-bottom: 1px solid ",";\n\tbackground-color: ",";\n\t",";\n"]);return H=function(){return t},t}var K=x.a.div.attrs({className:"telecast-item"})(H(),y,function(t){return"isNow"===t.type?E:"isOver"===t.type?I:"initial"},function(t){return"isPast"===t.type?"opacity: 0.3":null}),L=x.a.div.attrs({className:"telecast-time"})(G()),Q=x.a.h1.attrs({className:"head__title"})(q(),k),V=function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.time,a=t.type;return r.a.createElement(K,{type:a},r.a.createElement(L,null,n),r.a.createElement(Q,null,e))}}]),e}(a.PureComponent);V.defaultProps={title:"",img:"",altImg:"",type:"inFuture"};var W=V,X=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(o)))).renderItems=function(){return n.props.info.map(function(t){return r.a.createElement(W,{key:t.start+Math.random(),title:t.title,time:t.time,type:t.type})})},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement(Y,null,this.renderItems())}}]),e}(a.PureComponent);X.defaultProps={info:[],currentDate:Date.parse(new Date)};var Z=X,$="148",tt="perm",et="https://epg.domru.ru",nt=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).state={title:"",logo:"",url:"",info:[]},n.getInfoProgramm=function(){var t=JSON.parse(window.localStorage.getItem("info"));t&&t.title&&t.logo&&t.url?n.setState({title:t.title,logo:t.logo,url:t.url}):new p.a(function(t,e){fetch("".concat(et,"/channel/info?chid=").concat($,"&domain=").concat(tt)).then(function(t){return t.json()}).then(function(e){return t(e)}).catch(function(t){return e(t)})}).then(function(t){n.setState({title:t.title,logo:et+t.logo,url:t.url}),window.localStorage.setItem("info",JSON.stringify(n.state))}).catch(function(t){return console.log(t)})},n.getTelecasts=function(){var t=v()().valueOf(),e="".concat(m(t-864e5),"+").concat(encodeURIComponent("18:00:00")),a="".concat(m(t),"+").concat(encodeURIComponent("23:59:59")),r=JSON.parse(window.localStorage.getItem("rangeDate")),o=JSON.parse(window.localStorage.getItem("info"));if(r&&o&&r.from<=t&&r.to>=t){var l=w({data:o.info,currentDate:t});return n.setState(Object(i.a)({},o,{info:Object(c.a)(l)})),void n.allUpdate(l)}new p.a(function(t,n){fetch("".concat(et,"/program/list?date_from=").concat(e,"&date_to=").concat(a,"&xvid[0]=1&chid=").concat($,"&domain=").concat(tt)).then(function(t){return t.json()}).then(function(e){return t(e)}).catch(function(t){return n(t)})}).then(function(t){var e=t[1],a=v()().valueOf();n.setState({info:w({data:e,currentDate:a})}),window.localStorage.setItem("info",JSON.stringify(n.state)),window.localStorage.setItem("rangeDate",JSON.stringify({from:v()(m(a-864e5)+"T18:00:0",v.a.ISO_8601).valueOf(),to:v()(m(a)+"T23:59:59",v.a.ISO_8601).valueOf()})),n.allUpdate(n.state.info)}).catch(function(t){return console.log(t)})},n.allUpdate=function(t){var e=v()().valueOf();n.updateFromServer(e,v()(m(e)+" 23:59:59").valueOf()),n.updateTelecasts(t,e)},n.updateTelecasts=function(t,e){var a=t[2].end-e+1e3;console.log("Next update from state: ",a/1e3/60," min");var r=setTimeout(function(){console.log("updating from state"),clearTimeout(r),n.setState({info:w({data:t,currentDate:v()().valueOf()})}),n.updateTelecasts(n.state.info,v()().valueOf())},a)},n.updateFromServer=function(t,e){var a=e-t+1e3;console.log("Next update from server: ",a/1e3/60/60," hours");var r=setTimeout(function(){console.log("updating from server"),clearTimeout(r),n.getTelecasts()},a)},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.getInfoProgramm(),this.getTelecasts()}},{key:"render",value:function(){var t=this.state,e=t.title,n=t.logo,a=t.url,o=t.info;return r.a.createElement(_,null,r.a.createElement(P,null,r.a.createElement(R,{title:e,logo:n,url:a}),r.a.createElement(Z,{info:o})))}}]),e}(a.Component);Object(o.render)(r.a.createElement(nt,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.694ee584.chunk.js.map