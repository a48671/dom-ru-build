{"version":3,"sources":["helpers/formatDate.js","helpers/reduceTelecasts.js","variables/colors.js","styled.js","components/Head/styled.js","components/Head/index.js","components/TelecastList/styled.js","components/TelecastList/TelecastItem/styled.js","components/TelecastList/TelecastItem/index.js","components/TelecastList/index.js","App.js","index.js"],"names":["formatDate","date","year","Date","getFullYear","currentMonth","month","getMonth","day","getDate","concat","telecastDateStart","telecast","parse","start","toString","telecastDateEnd","duration","reduceTelecasts","createSelector","state","data","currentDate","reduce","acc","index","array","timeArray","split","time","Object","toConsumableArray","objectSpread","type","end","colors","Wrapper","styled","div","attrs","className","_templateObject","Container","_templateObject2","styled_templateObject","Logo","styled_templateObject2","Title","h1","_templateObject3","Head","_this$props","this","props","title","logo","url","react_default","a","createElement","styled_Wrapper","src","alt","href","target","rel","PureComponent","defaultProps","TelecastList_styled_templateObject","TelecastItem_styled_templateObject","Time","TelecastItem_styled_templateObject2","styled_templateObject3","TelecastItem","TelecastItem_styled_Wrapper","styled_Title","img","altImg","TelecastList","renderItems","_this","info","map","TelecastList_TelecastItem","key","Math","random","TelecastList_styled_Wrapper","chid","domain","urlAPI","App","getInfoProgramm","localInfo","JSON","window","localStorage","getItem","setState","axios","get","then","res","setItem","stringify","catch","error","console","log","getTelecasts","from","encodeURIComponent","to","dateRange","newTelecastsList","allUpdate","updateFromServer","updateTelecasts","nextUpdate","update","setTimeout","clearTimeout","_this$state","components_Head","components_TelecastList","Component","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.9ec316ab.chunk.js","sourcesContent":["// export const formatDate = (date) => encodeURIComponent(new Date(date)\n// \t.toLocaleString())\n// \t.replace('%2C%20', '+');\n\nexport const formatDate = (date) => {\n\n\tconst year = new Date(date).getFullYear();\n\tconst currentMonth = new Date(date);\n\tconst month = (currentMonth.getMonth() + 1 < 10) ? '0' + (currentMonth.getMonth() + 1) : currentMonth.getMonth() + 1;\n\tconst day = new Date(date).getDate();\n\n\treturn `${year}-${month}-${day}`;\n}","import {createSelector} from 'reselect';\n\nconst telecastDateStart = (telecast) => Date.parse(telecast.start.toString());\nconst telecastDateEnd = (telecast) => Date.parse(telecast.start.toString()) + telecast.duration * 1000;\n\nexport const reduceTelecasts = createSelector(\n\tstate => state.data,\n\tstate =>  state.currentDate,\n\t(data, currentDate) => data.reduce((acc, telecast, index, array) => {\n\t\tconst timeArray = telecast.start.split(' ')[1].split(':');\n\t\tconst time = `${timeArray[0]}:${timeArray[1]}`;\n\n\t\tif(telecastDateStart(telecast) > currentDate) {\n\t\t\treturn [...acc, {...telecast, type: 'inFuture', time: time, end: telecastDateEnd(telecast)}];\n\t\t}\n\t\tif(telecastDateStart(telecast) <= currentDate\n\t\t\t&& telecastDateEnd(telecast) >= currentDate) {\n\t\t\treturn [...acc, {...telecast, type: 'isNow', time: time, end: telecastDateEnd(telecast)}];\n\t\t}\n\t\tif(telecastDateEnd(telecast) < currentDate\n\t\t\t&& telecastDateEnd(array[index+1]) >= currentDate) {\n\t\t\treturn [...acc, {...telecast, type: 'isOver', time: time, end: telecastDateEnd(telecast)}];\n\t\t}\n\t\tif(telecastDateEnd(telecast) < currentDate\n\t\t\t&& telecastDateEnd(array[index+1]) < currentDate\n\t\t\t&& telecastDateEnd(array[index+2]) >= currentDate) {\n\t\t\treturn [...acc, {...telecast, type: 'isPast', time: time, end: telecastDateEnd(telecast)}];\n\t\t}\n\t\telse return [...acc];\n\t}, [])\n);","export const colors = {\n\tgray: '#aeaeae',\n\twhite: '#fff',\n\tgreen: 'green',\n\tblue: 'blue',\n\tblueLight: '#c7e6fd',\n\tpink: 'pink',\n\tdark: '#333'\n}","import styled from 'styled-components';\nimport {colors} from './variables/colors';\n\nexport const Wrapper = styled.div.attrs({className: 'wrapper'})`\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 100%;\n\tmin-height: 100vh;\n\toverflow: hidden;\n\tbackground-color: ${colors.gray};\n`;\n\nexport const Container = styled.div.attrs({className: 'container'})`\n\tdisplay: block;\n\twidth: 100%;\n\tmax-width: 500px;\n\tmax-height: 100vh;\n\tbackground-color:${colors.white};\n`;","import styled from 'styled-components';\nimport {colors} from '../../variables/colors';\n\nexport const Wrapper = styled.div.attrs({className: 'head'})`\n\tdisplay: flex;\n\talign-items: center;\n\twidth: 100%;\n\tpadding: 10px 20px;\n`;\n\nexport const Logo = styled.div.attrs({className: 'head__logo'})`\n\twidth: 70px;\n\theight: 70px;\n\timg {\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t}\n`;\n\nexport const Title = styled.h1.attrs({className: 'head__title'})`\n\twidth: calc(100% - 70px);\n\tfont-size: 24px;\n\tfont-weight: 600;\n\tpadding-left: 30px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\ta {\n\t\tcolor: ${colors.blue};\n\t\ttext-decoration: underline;\n\t}\n\t@media (max-width: 430px) {\n         font-size: 22px;\n  \t}\n`;\n","import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Wrapper, Logo, Title} from './styled';\n\nclass Head extends PureComponent {\n\trender() {\n\n\t\tconst {title, logo, url} = this.props;\n\n\t\treturn (\n\t\t\t<Wrapper>\n\t\t\t\t<Logo>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={logo}\n\t\t\t\t\t     alt={title}\n\t\t\t\t\t/>\n\t\t\t\t</Logo>\n\t\t\t\t<Title>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={url}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</a>\n\t\t\t\t</Title>\n\t\t\t</Wrapper>\n\t\t);\n\t}\n}\n\nHead.propTypes = {\n\ttitle: PropTypes.string,\n\tlogo: PropTypes.string,\n\turl: PropTypes.string\n};\n\nHead.defaultProps = {\n\ttitle: '',\n\tlogo: '',\n\turl: ''\n};\n\nexport default Head;","import styled from 'styled-components';\n\nexport const Wrapper = styled.div.attrs({className: 'telecast-list'})`\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tmax-height: calc(100vh - 90px);\n`;","import styled from 'styled-components';\nimport {colors} from '../../../variables/colors';\n\nexport const Wrapper = styled.div.attrs({className: 'telecast-item'})`\n\tdisplay: flex;\n\tpadding: 10px 20px;\n\talign-items: flex-start;\n\tborder-bottom: 1px solid ${colors.gray};\n\tbackground-color: ${\n\t\tprops => {\n\t\t\tif(props.type === 'isNow') return colors.blueLight;\n\t\t\tif(props.type === 'isOver') return colors.pink;\n\t\t\telse return 'initial';\n\t\t}\n\t};\n\t${props => {\n\t\treturn props.type === 'isPast' ? 'opacity: 0.3' : null\n\t}};\n`;\n\nexport const Time = styled.div.attrs({className: 'telecast-time'})`\n\twidth: 55px;\n\tfont-size: 22px;\n\t@media (max-width: 430px) {\n         font-size: 20px;\n  \t}\n`;\n\nexport const Title = styled.h1.attrs({className: 'head__title'})`\n\twidth: calc(100% - 70px);\n\tfont-size: 20px;\n\tfont-weight: 600;\n\tcolor: ${colors.dark};\n\tpadding-left: 15px;\n\toverflow: hidden;\n\t@media (max-width: 430px) {\n         font-size: 18px;\n  \t}\n`;","import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Wrapper, Time, Title} from './styled'\n\nclass TelecastItem extends PureComponent {\n\trender() {\n\n\t\tconst {title, time, type} = this.props;\n\n\t\treturn (\n\t\t\t<Wrapper type={type}>\n\t\t\t\t<Time>\n\t\t\t\t\t{time}\n\t\t\t\t</Time>\n\t\t\t\t<Title>\n\t\t\t\t\t{title}\n\t\t\t\t</Title>\n\t\t\t</Wrapper>\n\t\t);\n\t}\n}\n\nTelecastItem.propTypes = {\n\ttitle: PropTypes.string,\n\ttime: PropTypes.string,\n\ttype: PropTypes.string\n};\n\nTelecastItem.defaultProps = {\n\ttitle: '',\n\timg: '',\n\taltImg: '',\n\ttype: 'inFuture'\n};\n\nexport default TelecastItem;","import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Wrapper} from './styled';\nimport TelecastItem from \"./TelecastItem\";\n\nclass TelecastList extends PureComponent {\n\n\trender() {\n\n\t\treturn (\n\t\t\t<Wrapper>\n\t\t\t\t{this.renderItems()}\n\t\t\t</Wrapper>\n\t\t);\n\t}\n\n\trenderItems = () => {\n\n\t\tconst {info} = this.props;\n\n\t\treturn(\n\t\t\tinfo.map((telecast) => {\n\n\t\t\t\treturn(\n\t\t\t\t\t<TelecastItem\n\t\t\t\t\t\tkey={telecast.start + Math.random()}\n\t\t\t\t\t\ttitle={telecast.title}\n\t\t\t\t\t\ttime={telecast.time}\n\t\t\t\t\t\ttype={telecast.type} // isNow, isOver, inFuture, isPast\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t};\n\n}\n\nTelecastList.propTypes = {\n\tinfo: PropTypes.arrayOf(PropTypes.object),\n\tcurrentDate: PropTypes.number\n};\n\nTelecastList.defaultProps = {\n\tinfo: [],\n\tcurrentDate: Date.parse(new Date())\n};\n\nexport default TelecastList;","import React, {Component} from 'react';\nimport axios from 'axios';\nimport {formatDate} from './helpers/formatDate';\nimport {reduceTelecasts} from './helpers/reduceTelecasts';\n\nimport {Wrapper, Container } from './styled';\n\nimport Head from './components/Head';\nimport TelecastList from \"./components/TelecastList\";\n\nconst chid = '148';\nconst domain = 'perm';\nconst urlAPI = 'http://epg.domru.ru';\n\nclass App extends Component {\n\n\tstate = {\n\t\ttitle: '',\n\t\tlogo: '',\n\t\turl: '',\n\t\tinfo: []\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.getInfoProgramm();\n\t\tthis.getTelecasts();\n\t};\n\n\tgetInfoProgramm = () => {\n\n\t\tconst localInfo = JSON.parse(window.localStorage.getItem('info'));\n\n\t\tif(localInfo && localInfo.title && localInfo.logo && localInfo.url) {\n\n\t\t\tthis.setState({\n\t\t\t\ttitle: localInfo.title,\n\t\t\t\tlogo: localInfo.logo,\n\t\t\t\turl: localInfo.url\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\taxios\n\t\t\t.get(`${urlAPI}/channel/info?chid=${chid}&domain=${domain}`)\n\t\t\t.then(res => {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttitle: res.data.title,\n\t\t\t\t\tlogo: urlAPI + res.data.logo,\n\t\t\t\t\turl: res.data.url\n\t\t\t\t});\n\t\t\t\twindow.localStorage.setItem('info', JSON.stringify(this.state));\n\t\t\t})\n\t\t\t.catch(error => console.log(error));\n\t};\n\n\tgetTelecasts = () => {\n\t\tconst currentDate = Date.parse(new Date());\n\n\t\tconst from = `${formatDate(currentDate - 86400000)}+${encodeURIComponent('18:00:00')}`;\n\t\tconst to = `${formatDate(currentDate)}+${encodeURIComponent('23:59:59')}`;\n\n\t\tconst dateRange = JSON.parse(window.localStorage.getItem('rangeDate'));\n\t\tconst localInfo = JSON.parse(window.localStorage.getItem('info'));\n\n\t\tif(dateRange && localInfo && dateRange.from <= currentDate && dateRange.to >= currentDate) {\n\n\t\t\tconst newTelecastsList = reduceTelecasts({data: localInfo.info, currentDate})\n\n\t\t\tthis.setState({\n\t\t\t\t...localInfo,\n\t\t\t\tinfo: [...newTelecastsList]\n\t\t\t});\n\n\t\t\tthis.allUpdate(newTelecastsList);\n\n\t\t\treturn;\n\t\t}\n\n\t\taxios\n\t\t\t.get(`${urlAPI}/program/list?date_from=${from}&date_to=${to}&xvid[0]=1&chid=${chid}&domain=${domain}`)\n\t\t\t.then(res => {\n\n\t\t\t\tconst currentDate = Date.parse(new Date());\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tinfo: reduceTelecasts({data: res.data[1], currentDate: currentDate})\n\t\t\t\t});\n\n\t\t\t\twindow.localStorage.setItem('info', JSON.stringify(this.state));\n\t\t\t\twindow.localStorage.setItem('rangeDate', JSON.stringify({\n\t\t\t\t\tfrom: Date.parse(formatDate(currentDate - 86400000) + ' 18:00:0'),\n\t\t\t\t\tto: Date.parse(formatDate(currentDate) + ' 23:59:59')\n\t\t\t\t}));\n\n\t\t\t\tthis.allUpdate(this.state.info);\n\n\t\t\t})\n\t\t\t.catch(error => console.log(error));\n\t};\n\n\tallUpdate = (info) => {\n\n\t\tconst currentDate = Date.parse(new Date());\n\n\t\tthis.updateFromServer(currentDate, Date.parse(formatDate(currentDate) + ' 23:59:59'));\n\n\t\tthis.updateTelecasts(info, currentDate);\n\t};\n\n\tupdateTelecasts = (info, currentDate) => {\n\n\t\tconst nextUpdate = info[2].end - currentDate + 1000;\n\n\t\tconsole.log('Next update from state: ', nextUpdate / 1000 / 60, ' min');\n\n\t\tconst update = setTimeout(() => {\n\t\t\tconsole.log('updating from state');\n\t\t\tclearTimeout(update);\n\t\t\tthis.setState({\n\t\t\t\tinfo: reduceTelecasts({data: info, currentDate: Date.parse(new Date())})\n\t\t\t});\n\t\t\tthis.updateTelecasts(this.state.info, Date.parse(new Date()));\n\t\t}, nextUpdate);\n\t};\n\n\tupdateFromServer = (currentDate, to) => {\n\n\t\tconst nextUpdate = to - currentDate + 1000;\n\n\t\tconsole.log('Next update from server: ', nextUpdate / 1000 / 60 / 60, ' hours');\n\n\t\tconst update = setTimeout(() => {\n\t\t\tconsole.log('updating from server');\n\t\t\tclearTimeout(update);\n\t\t\tthis.getTelecasts();\n\t\t}, nextUpdate);\n\t};\n\n\trender() {\n\n\t\tconst {title, logo, url, info} = this.state;\n\n\t\treturn (\n\t\t\t<Wrapper>\n\t\t\t\t<Container>\n\t\t\t\t\t<Head\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\tlogo={logo}\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t/>\n\t\t\t\t\t<TelecastList\n\t\t\t\t\t\tinfo={info}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t</Wrapper>\n\t\t);\n\t}\n}\n\nexport default App;","import React from 'react';\nimport {render} from 'react-dom';\n\nimport App from './App';\n\nrender(<App />, document.getElementById('root'));"],"sourceRoot":""}