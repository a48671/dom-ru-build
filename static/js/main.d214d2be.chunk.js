(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(t,e,n){t.exports=n(58)},58:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(12),c=n(10),i=n(11),l=n(5),u=n(6),s=n(8),f=n(7),d=n(9),p=n(14),m=n.n(p),g=function(t){var e=new Date(t).getFullYear(),n=new Date(t),a=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,r=new Date(t).getDate();return"".concat(e,"-").concat(a,"-").concat(r)},v=n(25),h=n(1),O=n.n(h),b=function(t){return O()(t.start.toString()).valueOf()},w=function(t){return O()(t.start.toString()).valueOf()+1e3*t.duration},j=Object(v.a)(function(t){return t.data},function(t){return t.currentDate},function(t,e){return t.reduce(function(t,n,a,r){var o=n.start.split(" ")[1].split(":"),l="".concat(o[0],":").concat(o[1]);return b(n)>e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"inFuture",time:l,end:w(n)})]):b(n)<=e&&w(n)>=e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"isNow",time:l,end:w(n)})]):w(n)<e&&w(r[a+1])>=e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"isOver",time:l,end:w(n)})]):w(n)<e&&w(r[a+1])<e&&w(r[a+2])>=e?[].concat(Object(c.a)(t),[Object(i.a)({},n,{type:"isPast",time:l,end:w(n)})]):Object(c.a)(t)},[])}),x=n(2),y=n(3),S="#aeaeae",N="#fff",E="blue",I="#c7e6fd",k="pink",D="#333";function T(){var t=Object(x.a)(["\n\tdisplay: block;\n\twidth: 100%;\n\tmax-width: 500px;\n\tmax-height: 100vh;\n\tbackground-color:",";\n"]);return T=function(){return t},t}function _(){var t=Object(x.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 100%;\n\tmin-height: 100vh;\n\toverflow: hidden;\n\tbackground-color: ",";\n"]);return _=function(){return t},t}var P=y.a.div.attrs({className:"wrapper"})(_(),S),J=y.a.div.attrs({className:"container"})(T(),N);function z(){var t=Object(x.a)(["\n\twidth: calc(100% - 70px);\n\tfont-size: 24px;\n\tfont-weight: 600;\n\tpadding-left: 30px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\ta {\n\t\tcolor: ",";\n\t\ttext-decoration: underline;\n\t}\n\t@media (max-width: 430px) {\n         font-size: 22px;\n  \t}\n"]);return z=function(){return t},t}function C(){var t=Object(x.a)(["\n\twidth: 70px;\n\theight: 70px;\n\timg {\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t}\n"]);return C=function(){return t},t}function F(){var t=Object(x.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\twidth: 100%;\n\tpadding: 10px 20px;\n"]);return F=function(){return t},t}var M=y.a.div.attrs({className:"head"})(F()),U=y.a.div.attrs({className:"head__logo"})(C()),A=y.a.h1.attrs({className:"head__title"})(z(),E),R=function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.logo,a=t.url;return r.a.createElement(M,null,r.a.createElement(U,null,r.a.createElement("img",{src:n,alt:e})),r.a.createElement(A,null,r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},e)))}}]),e}(a.PureComponent);R.defaultProps={title:"",logo:"",url:""};var B=R;function Y(){var t=Object(x.a)(["\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tmax-height: calc(100vh - 90px);\n"]);return Y=function(){return t},t}var q=y.a.div.attrs({className:"telecast-list"})(Y());function G(){var t=Object(x.a)(["\n\twidth: calc(100% - 70px);\n\tfont-size: 20px;\n\tfont-weight: 600;\n\tcolor: ",";\n\tpadding-left: 15px;\n\toverflow: hidden;\n\t@media (max-width: 430px) {\n         font-size: 18px;\n  \t}\n"]);return G=function(){return t},t}function H(){var t=Object(x.a)(["\n\twidth: 55px;\n\tfont-size: 22px;\n\t@media (max-width: 430px) {\n         font-size: 20px;\n  \t}\n"]);return H=function(){return t},t}function K(){var t=Object(x.a)(["\n\tdisplay: flex;\n\tpadding: 10px 20px;\n\talign-items: flex-start;\n\tborder-bottom: 1px solid ",";\n\tbackground-color: ",";\n\t",";\n"]);return K=function(){return t},t}var L=y.a.div.attrs({className:"telecast-item"})(K(),S,function(t){return"isNow"===t.type?I:"isOver"===t.type?k:"initial"},function(t){return"isPast"===t.type?"opacity: 0.3":null}),Q=y.a.div.attrs({className:"telecast-time"})(H()),V=y.a.h1.attrs({className:"head__title"})(G(),D),W=function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.time,a=t.type;return r.a.createElement(L,{type:a},r.a.createElement(Q,null,n),r.a.createElement(V,null,e))}}]),e}(a.PureComponent);W.defaultProps={title:"",img:"",altImg:"",type:"inFuture"};var X=W,Z=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(o)))).renderItems=function(){return n.props.info.map(function(t){return r.a.createElement(X,{key:t.start+Math.random(),title:t.title,time:t.time,type:t.type})})},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement(q,null,this.renderItems())}}]),e}(a.PureComponent);Z.defaultProps={info:[],currentDate:Date.parse(new Date)};var $=Z,tt="148",et="perm",nt="https://epg.domru.ru",at=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).state={title:"",logo:"",url:"",info:[]},n.getInfoProgramm=function(){var t=JSON.parse(window.localStorage.getItem("info"));t&&t.title&&t.logo&&t.url?n.setState({title:t.title,logo:t.logo,url:t.url}):m.a.get("".concat(nt,"/channel/info?chid=").concat(tt,"&domain=").concat(et)).then(function(t){n.setState({title:t.data.title,logo:nt+t.data.logo,url:t.data.url}),window.localStorage.setItem("info",JSON.stringify(n.state))}).catch(function(t){return console.log(t)})},n.getTelecasts=function(){var t=O()().valueOf(),e="".concat(g(t-864e5),"+").concat(encodeURIComponent("18:00:00")),a="".concat(g(t),"+").concat(encodeURIComponent("23:59:59")),r=JSON.parse(window.localStorage.getItem("rangeDate")),o=JSON.parse(window.localStorage.getItem("info"));if(r&&o&&r.from<=t&&r.to>=t){var l=j({data:o.info,currentDate:t});return n.setState(Object(i.a)({},o,{info:Object(c.a)(l)})),void n.allUpdate(l)}m.a.get("".concat(nt,"/program/list?date_from=").concat(e,"&date_to=").concat(a,"&xvid[0]=1&chid=").concat(tt,"&domain=").concat(et)).then(function(t){var e=t.data[1],a=O()().valueOf();n.setState({info:j({data:e,currentDate:a})}),window.localStorage.setItem("info",JSON.stringify(n.state)),window.localStorage.setItem("rangeDate",JSON.stringify({from:O()(g(a-864e5)+"T18:00:0",O.a.ISO_8601).valueOf(),to:O()(g(a)+"T23:59:59",O.a.ISO_8601).valueOf()})),n.allUpdate(n.state.info)}).catch(function(t){return console.log(t)})},n.allUpdate=function(t){var e=O()().valueOf();n.updateFromServer(e,O()(g(e)+" 23:59:59").valueOf()),n.updateTelecasts(t,e)},n.updateTelecasts=function(t,e){var a=t[2].end-e+1e3;console.log("Next update from state: ",a/1e3/60," min");var r=setTimeout(function(){console.log("updating from state"),clearTimeout(r),n.setState({info:j({data:t,currentDate:O()().valueOf()})}),n.updateTelecasts(n.state.info,O()().valueOf())},a)},n.updateFromServer=function(t,e){var a=e-t+1e3;console.log("Next update from server: ",a/1e3/60/60," hours");var r=setTimeout(function(){console.log("updating from server"),clearTimeout(r),n.getTelecasts()},a)},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.getInfoProgramm(),this.getTelecasts()}},{key:"render",value:function(){var t=this.state,e=t.title,n=t.logo,a=t.url,o=t.info;return r.a.createElement(P,null,r.a.createElement(J,null,r.a.createElement(B,{title:e,logo:n,url:a}),r.a.createElement($,{info:o})))}}]),e}(a.Component);Object(o.render)(r.a.createElement(at,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.d214d2be.chunk.js.map